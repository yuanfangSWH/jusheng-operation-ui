(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-172b57dc"],{5051:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"mb20 flex transposition justify-end"},[a("el-date-picker",{staticClass:"mr5",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"开票申请起始日期"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),a("el-date-picker",{staticClass:"mr5",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"开票申请结束日期"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}}),a("el-input",{staticClass:"search mr5",attrs:{placeholder:"请输入托运人",clearable:""},model:{value:t.shipperName,callback:function(e){t.shipperName=e},expression:"shipperName"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")]),a("el-button",{attrs:{type:"danger"},on:{click:t.clear}},[t._v("清空")])],1),a("div",{staticClass:"mb20"},[a("div",[a("el-button",{attrs:{type:"danger"},on:{click:t.fallbackInvoice}},[t._v("退回")])],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{label:"序号",type:"index"}}),a("el-table-column",{attrs:{prop:"applyCode",label:"申请单编号"}}),a("el-table-column",{attrs:{prop:"shipperFullName",label:"托运人"}}),a("el-table-column",{attrs:{prop:"companyName",label:"业务管理公司"}}),a("el-table-column",{attrs:{prop:"totalFreight",label:"含管理费开票总金额"}}),a("el-table-column",{attrs:{prop:"createTime",label:"申请时间"}}),a("el-table-column",{attrs:{prop:"createBy",label:"申请人"}}),a("el-table-column",{attrs:{prop:"invoiceDetail",label:"发票图片"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"operate mr10",staticStyle:{color:"#409eff"},on:{click:function(a){return t.detailsIMG(e.row.invoiceDetail)}}},[t._v("查看")])]}}])}),a("el-table-column",{attrs:{prop:"waybillNumber",label:"运单数"}}),a("el-table-column",{attrs:{prop:"remark",label:"发票备注"}}),a("el-table-column",{attrs:{prop:"invoiceStatus",label:"开票状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.invoiceStatus?a("span",[t._v("未开")]):t._e(),1==e.row.invoiceStatus?a("span",[t._v("已开")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"operate mr10",staticStyle:{color:"#e6a23c"},on:{click:function(a){return t.goInvoice(e.row)}}},[t._v("发票管理")])]}}])})],1),a("div",{staticClass:"paging_css"},[a("Pagination",{attrs:{total:t.total,page:t.pageNum,limit:t.pageSize},on:{pagination:t.pagination}})],1),a("el-dialog",{attrs:{visible:t.dialogIMG,"append-to-body":!0},on:{"update:visible":function(e){t.dialogIMG=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},n=[],o=(a("d3b7"),a("25f0"),a("d81d"),a("a8b5")),l=a("333d"),r={components:{Pagination:l["a"]},data:function(){return{shipperName:"",startTime:"",endTime:"",tableData:[],pageSize:10,pageNum:1,total:0,dialogIMG:!1,dialogImageUrl:"",multipleSelection:[]}},created:function(){this.getList()},methods:{exportCarriage:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this;exportCarriage({}).then((function(e){t.downloadData(e)}))})),goInvoice:function(t){this.$router.push({path:"/finance/invoice/infoii",query:{applyCode:t.applyCode}})},query:function(){this.pageNum=1,this.getList()},getList:function(){var t=this,e={shipperName:this.shipperName,startTime:this.startTime,endTime:this.endTime};Object(o["c"])(e,{pageSize:this.pageSize,pageNum:this.pageNum}).then((function(e){200==e.code&&(t.tableData=e.rows,t.total=e.total)}))},pagination:function(t){this.pageSize=t.limit,this.pageNum=t.page,this.getList()},clear:function(){this.shipperName="",this.startTime="",this.endTime="",this.getList()},detailsIMG:function(t){this.dialogIMG=!0,this.dialogImageUrl=t},handleSelectionChange:function(t){this.multipleSelection=t.map((function(t){return t.applyCode}))},fallbackInvoice:function(){var t=this;this.multipleSelection.length<=0?this.$message({message:"请勾选需要回退的数据",type:"warning",duration:2e3}):this.multipleSelection.length>1?this.$message({message:"发票退回不支持批量操作，请勾选单条数据",type:"warning",duration:2e3}):this.$confirm("确定将该条数据回退吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])({applyCode:String(t.multipleSelection)}).then((function(e){200==e.code&&(t.getList(),t.$message({message:"回退成功",type:"success",duration:3e3}))}))}))}}},s=r,c=a("2877"),u=Object(c["a"])(s,i,n,!1,null,"c6d16f4a",null);e["default"]=u.exports},a8b5:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"d",(function(){return o})),a.d(e,"b",(function(){return l})),a.d(e,"e",(function(){return r})),a.d(e,"a",(function(){return s}));var i=a("b775");function n(t,e){return Object(i["a"])({url:"/operation/invoiceManage/queryInvoiceInfo",method:"post",data:t,params:e})}function o(t){return Object(i["a"])({url:"/operation/invoiceAudit/queryInvoiceById",method:"post",data:t})}function l(t){return Object(i["a"])({url:"operation/invoiceManage/fallbackInvoice",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/operation/invoiceManage/uploadInvoice",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/operation/invoiceManage/deleteInvoice",method:"post",data:t})}}}]);