(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51a4e3ce"],{"25c0":function(e,t,a){},"396e":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"i",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return r})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"e",(function(){return p})),a.d(t,"h",(function(){return m}));var o=a("b775");function n(e,t){return Object(o["a"])({url:"/operation/couponManage/queryCoupons",method:"post",data:e,params:t})}function i(e){return Object(o["a"])({url:"/operation/couponManage/saveCoupon",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/operation/couponManage/increaseCouponNum",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/operation/couponManage/giveCoupon",method:"post",data:e})}function r(e){return Object(o["a"])({url:"/operation/couponManage/endCoupon",method:"post",data:e})}function c(e,t){return Object(o["a"])({url:"/operation/couponManage/queryFlRecords",method:"post",data:e,params:t})}function u(e){return Object(o["a"])({url:"operation/couponManage/queryGiveCouponClientInfo",method:"post",data:e})}function p(e,t){return Object(o["a"])({url:"operation/couponManage/queryBlacklists",method:"post",data:e,params:t})}function m(e){return Object(o["a"])({url:"operation/couponManage/releaseBlacklist",method:"post",data:e})}},"9bdc":function(e,t,a){"use strict";a("25c0")},e8c5:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"mb20 flex transposition justify-end"},[a("el-date-picker",{staticClass:"mr5",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择创建起始日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),a("el-date-picker",{staticClass:"mr5",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择创建结束日期"},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}),a("el-select",{attrs:{size:"small mr10",placeholder:"返利类型"},model:{value:e.sceneType,callback:function(t){e.sceneType=t},expression:"sceneType"}},[a("el-option",{attrs:{value:0,label:"满减券"}}),a("el-option",{attrs:{value:1,label:"折扣券"}}),a("el-option",{attrs:{value:2,label:"抵扣券"}}),a("el-option",{attrs:{value:3,label:"现金券"}}),a("el-option",{attrs:{value:4,label:"其它"}})],1),a("el-select",{attrs:{size:"small mr10",placeholder:"发放场景"},model:{value:e.sceneName,callback:function(t){e.sceneName=t},expression:"sceneName"}},[a("el-option",{attrs:{value:0,label:"用油返利"}}),a("el-option",{attrs:{value:1,label:"服务费返利"}}),a("el-option",{attrs:{value:2,label:"推荐客户"}}),a("el-option",{attrs:{value:3,label:"促销活动"}}),a("el-option",{attrs:{value:4,label:"其它"}})],1),a("el-select",{attrs:{size:"small mr10",placeholder:"结束状态"},model:{value:e.isEnd,callback:function(t){e.isEnd=t},expression:"isEnd"}},[a("el-option",{attrs:{value:0,label:"未结束"}}),a("el-option",{attrs:{value:1,label:"已结束"}})],1),a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),a("el-button",{attrs:{type:"danger"},on:{click:e.empty}},[e._v("清空")])],1),a("div",{staticClass:"mb20"},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新建返利场景")]),a("el-button",{attrs:{type:"warning"},on:{click:e.goBlack}},[e._v("黑名单")]),a("el-button",{attrs:{type:"warning"},on:{click:e.goAnnal}},[e._v("返利记录")])],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),a("el-table-column",{attrs:{prop:"couponId",label:"返利ID"}}),a("el-table-column",{attrs:{prop:"sceneName",label:"发放场景"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.sceneName?a("span",[e._v("用油返利")]):1==t.row.sceneName?a("span",[e._v("服务费返利")]):2==t.row.sceneName?a("span",[e._v("推荐客户")]):3==t.row.sceneName?a("span",[e._v("促销活动")]):4==t.row.sceneName?a("span",[e._v("其他")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"sceneType",label:"返利类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.sceneType?a("span",[e._v("满减券")]):1==t.row.sceneType?a("span",[e._v("折扣券")]):2==t.row.sceneType?a("span",[e._v("抵扣券")]):3==t.row.sceneType?a("span",[e._v("现金券")]):4==t.row.sceneType?a("span",[e._v("其他")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"sceneCash",label:"返利金额(元)"}}),a("el-table-column",{attrs:{label:"剩余/发行量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.sceneRemaining)+"/"+e._s(t.row.sceneCirculation)+" ")]}}])}),a("el-table-column",{attrs:{prop:"sceneUse",label:"使用量"}}),a("el-table-column",{attrs:{prop:"effectiveStartTime",label:"有效开始时间"}}),a("el-table-column",{attrs:{prop:"effectiveEndTime",label:"有效结束时间"}}),a("el-table-column",{attrs:{prop:"createBy",label:"创建人"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"isEnd",label:"结束状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.isEnd?a("span",{staticStyle:{color:"#67c23a"}},[e._v("未结束")]):1==t.row.isEnd?a("span",{staticStyle:{color:"#f56c6c"}},[e._v("已结束")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"operate mr10",staticStyle:{color:"#409eff"},on:{click:function(a){return e.increase(t.row)}}},[e._v("增发")]),a("span",{staticClass:"operate mr10",staticStyle:{color:"#67c23a"},on:{click:function(a){return e.hair(t.row)}}},[e._v("发放")]),a("span",{staticClass:"operate mr10",staticStyle:{color:"#f56c6c"},on:{click:function(a){return e.endCoupon(t.row)}}},[e._v("结束")])]}}])})],1),a("div",{staticClass:"paging_css"},[a("Pagination",{attrs:{total:e.total,page:e.pageNum,limit:e.pageSize},on:{pagination:e.pagination}})],1),a("el-dialog",{attrs:{title:"新建返利场景",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px",inline:""}},[a("div",{staticClass:"mb20"},[a("el-divider",{attrs:{"content-position":"left"}},[a("span",{staticClass:"weight"},[e._v("基础信息")])])],1),a("el-form-item",{attrs:{label:"场景名称",prop:"sceneName"}},[a("el-select",{attrs:{size:"small mr10",placeholder:"发放场景"},model:{value:e.form.sceneName,callback:function(t){e.$set(e.form,"sceneName",t)},expression:"form.sceneName"}},[a("el-option",{attrs:{value:0,label:"用油返利"}}),a("el-option",{attrs:{value:1,label:"服务费返利"}}),a("el-option",{attrs:{value:2,label:"推荐客户"}}),a("el-option",{attrs:{value:3,label:"促销活动"}}),a("el-option",{attrs:{value:4,label:"其它"}})],1)],1),a("el-form-item",{attrs:{label:"返利类型",prop:"sceneType"}},[a("el-select",{attrs:{size:"small mr10",placeholder:"返利类型"},model:{value:e.form.sceneType,callback:function(t){e.$set(e.form,"sceneType",t)},expression:"form.sceneType"}},[a("el-option",{attrs:{value:0,label:"满减券"}}),a("el-option",{attrs:{value:1,label:"折扣券"}}),a("el-option",{attrs:{value:2,label:"抵扣券"}}),a("el-option",{attrs:{value:3,label:"现金券"}}),a("el-option",{attrs:{value:4,label:"其它"}})],1)],1),a("el-form-item",{attrs:{label:"返利金额(元)"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.sceneCash,callback:function(t){e.$set(e.form,"sceneCash",t)},expression:"form.sceneCash"}})],1),a("el-form-item",{attrs:{label:"发行量"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.sceneCirculation,callback:function(t){e.$set(e.form,"sceneCirculation",t)},expression:"form.sceneCirculation"}})],1),a("el-form-item",{attrs:{label:"有效期"}},[a("el-date-picker",{attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择起始日期"},model:{value:e.form.effectiveStartTime,callback:function(t){e.$set(e.form,"effectiveStartTime",t)},expression:"form.effectiveStartTime"}}),e._v(" - "),a("el-date-picker",{staticClass:"mr5",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择结束日期"},model:{value:e.form.effectiveEndTime,callback:function(t){e.$set(e.form,"effectiveEndTime",t)},expression:"form.effectiveEndTime"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入备注内容"},model:{value:e.form.sceneRemark,callback:function(t){e.$set(e.form,"sceneRemark",t)},expression:"form.sceneRemark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveCoupon}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"增发",visible:e.dialogVisible1,width:"24%",center:""},on:{"update:visible":function(t){e.dialogVisible1=t}}},[a("el-form",{ref:"form1",attrs:{model:e.form1,rules:e.rules1,"label-width":"100px",inline:""}},[a("p",{staticStyle:{"margin-left":"18px"}},[e._v(" 当前发行总量："+e._s(e.form1.sceneCirculation)+" 张 ")]),a("el-form-item",{attrs:{label:"新增发行量",prop:"circulationNum"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form1.circulationNum,callback:function(t){e.$set(e.form1,"circulationNum",t)},expression:"form1.circulationNum"}}),e._v(" 张 ")],1),a("p",{staticStyle:{"margin-left":"18px"}},[e._v("更新后总发行量："+e._s(e.increaseNum)+" 张")])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible1=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.increaseCouponNum}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"发放",visible:e.dialogVisible2,width:"30%",center:""},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("el-form",{ref:"form2",attrs:{model:e.form2,rules:e.rules2,"label-width":"150px",inline:""}},[a("el-form-item",{attrs:{label:"客户名称",prop:"shipperUserId_data"}},[a("el-select",{attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入客户名称","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.form2.shipperUserId_data,callback:function(t){e.$set(e.form2,"shipperUserId_data",t)},expression:"form2.shipperUserId_data"}},e._l(e.options,(function(e){return a("el-option",{key:e.shipperUserId,attrs:{label:e.shipperFullName,value:e.shipperUserId}})})),1)],1),a("el-form-item",{attrs:{label:"发放数量",prop:"giveNum"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form2.giveNum,callback:function(t){e.$set(e.form2,"giveNum",t)},expression:"form2.giveNum"}}),e._v(" 张 ")],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.giveCoupon}},[e._v("发放至已选择客户")])],1)],1)],1)},n=[],i=(a("a9e3"),a("396e")),l=a("333d"),s={components:{Pagination:l["a"]},data:function(){return{numberData:"",tableData:[],dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,form:{sceneName:0,sceneType:0,sceneCash:"",sceneCirculation:"",effectiveStartTime:"",effectiveEndTime:"",sceneRemark:""},form1:{couponId:"",sceneCirculation:0,circulationNum:0},form2:{couponId:"",shipperUserId:"",shipperUserId_data:"",giveNum:0},rules:{},rules1:{},rules2:{},sceneName:"",isEnd:"",sceneType:"",startTime:"",endTime:"",pageSize:10,pageNum:1,total:0,loading:!1,timeID:"",options:[]}},computed:{increaseNum:function(){return Number(this.form1.sceneCirculation)+Number(this.form1.circulationNum)}},mounted:function(){this.getList()},methods:{query:function(){this.pageNum=1,this.getList()},getList:function(){var e=this,t={sceneName:this.sceneName,isEnd:this.isEnd,sceneType:this.sceneType,startTime:this.startTime,endTime:this.endTime};Object(i["b"])(t,{pageSize:this.pageSize,pageNum:this.pageNum}).then((function(t){200==t.code&&(e.tableData=t.rows,e.total=t.total)}))},empty:function(){this.sceneName="",this.isEnd="",this.sceneType="",this.startTime="",this.endTime="",this.pageSize=10,this.pageNum=1,this.getList()},pagination:function(e){this.pageSize=e.limit,this.pageNum=e.page,this.getList()},saveCoupon:function(){var e=this;this.$refs.form.validate((function(t){t&&Object(i["i"])(e.form).then((function(t){200==t.code&&(e.dialogVisible=!1,e.$refs.form.resetFields(),e.$message({message:"新建成功",type:"success",duration:3e3}),e.getList())}))}))},increase:function(e){this.form1.couponId=e.couponId,this.form1.sceneCirculation=e.sceneCirculation,this.dialogVisible1=!0},increaseCouponNum:function(){var e=this;this.$refs.form1.validate((function(t){t&&(e.form1.circulationNum=Number(e.form1.circulationNum),Object(i["d"])(e.form1).then((function(t){200==t.code&&(e.dialogVisible1=!1,e.$refs.form1.resetFields(),e.$message({message:"增发成功",type:"success",duration:3e3}),e.getList())})))}))},hair:function(e){this.form2.couponId=e.couponId,this.form2.shipperUserId_data="",this.form2.shipperUserId="",this.dialogVisible2=!0},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,clearTimeout(this.timeID),this.timeID=setTimeout((function(){Object(i["g"])({shipperFullName:e}).then((function(e){200==e.code&&(t.loading=!1,t.options=e.data)}))}),1500)):this.options=[]},giveCoupon:function(){var e=this;this.$refs.form2.validate((function(t){t&&(e.form2.giveNum=Number(e.form2.giveNum),e.form2.shipperUserId=String(e.form2.shipperUserId_data),Object(i["c"])(e.form2).then((function(t){200==t.code&&(e.dialogVisible2=!1,e.$refs.form2.resetFields(),e.$message({message:"发放成功",type:"success",duration:3e3}),e.getList())})))}))},endCoupon:function(e){var t=this;this.$confirm("是否结束这个"+e.couponId+"卷的发放","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(i["a"])({couponId:e.couponId}).then((function(e){200==e.code&&(t.getList(),t.$message({message:"结束成功",type:"success",duration:3e3}))}))}))},goAnnal:function(){this.$router.push("/business/rebate/annal")},goBlack:function(){this.$router.push("/business/rebate/black")}}},r=s,c=(a("9bdc"),a("2877")),u=Object(c["a"])(r,o,n,!1,null,"cf2b8184",null);t["default"]=u.exports}}]);