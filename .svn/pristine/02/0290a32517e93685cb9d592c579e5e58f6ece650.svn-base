(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0be158"],{"2f6d":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"mb20 flex transposition justify-end"},[a("el-button",{staticClass:"mr10",attrs:{type:"warning"},on:{click:e.exportClientPayee}},[e._v("导出")]),a("el-input",{staticClass:"mr10",attrs:{placeholder:"请输入收款人姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query(t)}},model:{value:e.queryParams.nickName,callback:function(t){e.$set(e.queryParams,"nickName",t)},expression:"queryParams.nickName"}}),a("el-input",{staticClass:"mr10",attrs:{placeholder:"请输入银行卡卡号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.query(t)}},model:{value:e.queryParams.carNum,callback:function(t){e.$set(e.queryParams,"carNum",t)},expression:"queryParams.carNum"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),a("el-button",{attrs:{type:"danger"},on:{click:e.resetQuery}},[e._v("清空")])],1),a("div",{staticClass:"mb20"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"bankNo",label:"序号",type:"index"}}),a("el-table-column",{attrs:{prop:"kaihuName",label:"收款人姓名"}}),a("el-table-column",{attrs:{prop:"userId",label:"所属用户"}}),a("el-table-column",{attrs:{prop:"accountBank",label:"身份证号"}}),a("el-table-column",{attrs:{prop:"payeePhone",label:"收款人电话"}}),a("el-table-column",{attrs:{prop:"accountBank",label:"银行卡号"}}),a("el-table-column",{attrs:{prop:"kaihuBank",label:"开户银行"}}),a("el-table-column",{attrs:{prop:"createBy",label:"创建人"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),a("el-table-column",{attrs:{label:"操作",align:"center","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"operate mr10",staticStyle:{color:"#f56c6c"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"paging_css"},[a("Pagination",{attrs:{total:e.total,page:e.pageNum,limit:e.pageSize},on:{pagination:e.pagination}})],1),a("el-dialog",{attrs:{title:1==e.state?"添加收款人":"修改收款人",visible:e.dialogVisible,width:"800px","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"开户人姓名",prop:"kaihuName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.kaihuName,callback:function(t){e.$set(e.form,"kaihuName",t)},expression:"form.kaihuName"}})],1),a("el-form-item",{attrs:{label:"银行卡号",prop:"accountBank"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.accountBank,callback:function(t){e.$set(e.form,"accountBank",t)},expression:"form.accountBank"}})],1),a("el-form-item",{attrs:{label:"身份证号",prop:"idCardNumber"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.idCardNumber,callback:function(t){e.$set(e.form,"idCardNumber",t)},expression:"form.idCardNumber"}})],1),a("el-form-item",{attrs:{label:"开户银行",prop:"kaihuBank"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.kaihuBank,callback:function(t){e.$set(e.form,"kaihuBank",t)},expression:"form.kaihuBank"}})],1),a("el-form-item",{attrs:{label:"收款人电话",prop:"payeePhone"}},[a("el-input",{attrs:{clearable:""},model:{value:e.form.payeePhone,callback:function(t){e.$set(e.form,"payeePhone",t)},expression:"form.payeePhone"}})],1),a("el-form-item",{attrs:{label:"关联人身份",prop:"identity"}},[a("el-select",{attrs:{size:"small mr10",placeholder:"关联人身份"},model:{value:e.form.identity,callback:function(t){e.$set(e.form,"identity",t)},expression:"form.identity"}},[a("el-option",{attrs:{value:1,label:"企业"}}),a("el-option",{attrs:{value:0,label:"个人"}})],1)],1),a("el-form-item",{attrs:{label:"关联人",prop:"shipperFullName"}},[a("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"手机号搜索"},on:{select:e.handleSelect},model:{value:e.form.shipperFullName,callback:function(t){e.$set(e.form,"shipperFullName",t)},expression:"form.shipperFullName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},r=[],i=a("b85c"),n=a("b775");function o(e,t){return Object(n["a"])({url:"/operation/clientPayee/queryPayees",method:"post",data:e,params:t})}function s(e){return Object(n["a"])({url:"/operation/clientPayee/saveClientPayee",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/operation/clientPayee/deletePayee",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/operation/clientPayee/queryAffiliatedPerson",method:"get",params:e})}function m(e){return Object(n["a"])({url:"/operation/clientPayee/exportClientPayee",method:"post",responseType:"blob",data:e})}var p=a("333d"),d={components:{Pagination:p["a"]},data:function(){return{timeID:"",state:1,pageNum:1,pageSize:10,total:0,tableData:[],dialogVisible:!1,queryParams:{nickName:null,carNum:null},form:{identity:1,shipperFullName:"",userId:"",kaihuName:"",idCardNumber:"",payeePhone:"",accountBank:"",kaihuBank:""},rules:{shipperFullName:[{required:!0,message:"关联人不能为空",trigger:"blur"}]}}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;o(this.queryParams,{pageSize:this.pageSize,pageNum:this.pageNum}).then((function(t){200==t.code&&(e.tableData=t.rows,e.total=t.total)}))},query:function(){this.pageNum=1,this.getList()},resetQuery:function(){this.queryParams={nickName:null,carNum:null},this.pageNum=10,this.pageSize=1,this.getList()},handleSelect:function(e){this.form.userId=e.userId},querySearchAsync:function(e,t){var a=this;clearTimeout(this.timeID),this.timeID=setTimeout((function(){c({shipperFullName:e,identity:a.form.identity}).then((function(e){if(200==e.code){var a,l=[],r=Object(i["a"])(e.data);try{for(r.s();!(a=r.n()).done;){var n=a.value;l.push({value:n.shipperFullName,userId:n.userId})}}catch(o){r.e(o)}finally{r.f()}t(l)}}))}),1500)},handleAdd:function(){this.dialogVisible=!0,this.state=1},handleUpdate:function(e){this.form=e,this.dialogVisible=!0,this.state=2},submitForm:function(e){var t=this;this.$refs.form.validate((function(e){e&&(1==t.state?s(t.form).then((function(e){200==e.code&&(t.$message({message:"新增成功",type:"success",duration:3e3}),t.$refs.form.resetFields(),t.dialogVisible=!1,t.getList())})):XXX(t.form).then((function(e){200==e.code&&(t.$message({message:"修改成功",type:"success",duration:3e3}),t.$refs.form.resetFields(),t.dialogVisible=!1,t.getList())})))}))},handleDelete:function(e){var t=this;this.$confirm("删除收款人ID为"+e.payeeId+"的数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u({payeeId:e.payeeId}).then((function(e){200==e.code&&(t.getList(),t.$message({message:"删除成功",type:"success",duration:3e3}))}))}))},exportClientPayee:function(){var e=this;m({}).then((function(t){e.downloadData(t)}))},pagination:function(e){this.queryParams.pageSize=e.page,this.queryParams.pageNum=e.limit,this.getList()}}},f=d,b=a("2877"),h=Object(b["a"])(f,l,r,!1,null,null,null);t["default"]=h.exports}}]);