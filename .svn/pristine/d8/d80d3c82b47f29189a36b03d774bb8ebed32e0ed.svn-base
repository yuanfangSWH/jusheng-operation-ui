(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bc51570"],{1720:function(t,e,a){},"365c":function(t,e,a){"use strict";a.d(e,"e",(function(){return l})),a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return s}));var i=a("b775");function l(t){return Object(i["a"])({url:"/operation/file/uploadFile",method:"post",headers:{"Content-Type":"multipart/form-data"},data:t})}function n(t){return Object(i["a"])({url:"/operation/file/deleteFile",headers:{"Content-Type":"multipart/form-data"},method:"post",data:t})}function o(t){return Object(i["a"])({url:"/operation/file/DLCardOCRAndUpload",headers:{"Content-Type":"multipart/form-data"},method:"post",data:t})}function r(t){return Object(i["a"])({url:"/operation/file/IDCardOCRAndUpload",headers:{"Content-Type":"multipart/form-data"},method:"post",data:t})}function s(t){return Object(i["a"])({url:"/operation/file/VDLCardOCRAndUpload",headers:{"Content-Type":"multipart/form-data"},method:"post",data:t})}},"4cfd":function(t,e,a){"use strict";a("d223")},"5e69":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"mb20 flex transposition justify-end"},[a("el-button",{staticClass:"mr10",attrs:{type:"warning"}},[t._v("导出")]),a("el-date-picker",{staticClass:"mr5",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择打款起始日期"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}}),a("el-date-picker",{staticClass:"mr5",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择打款结束日期"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}}),a("el-select",{staticClass:"mr5",attrs:{placeholder:"打款状态"},model:{value:t.audit_status,callback:function(e){t.audit_status=e},expression:"audit_status"}},t._l(t.state,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-select",{staticClass:"mr5",attrs:{placeholder:"业务管理公司"},model:{value:t.company_value,callback:function(e){t.company_value=e},expression:"company_value"}},t._l(t.company,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-select",{staticClass:"mr5",model:{value:t.conditions_value,callback:function(e){t.conditions_value=e},expression:"conditions_value"}},t._l(t.conditions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-input",{staticClass:"search mr5",attrs:{placeholder:"请输入对应的条件",clearable:""},model:{value:t.numberData,callback:function(e){t.numberData=e},expression:"numberData"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")]),a("el-button",{attrs:{type:"danger"},on:{click:t.empty}},[t._v("清空")])],1),a("div",{staticClass:"litim"},[a("div",{staticClass:"pingt1"},[t._v("平台账户")]),t._l(t.bankData,(function(e){return a("div",{key:e.accId,staticClass:"pingt2"},[t._v(" "+t._s(e.companyName)+"("+t._s(e.accBankName)+")：￥"+t._s(e.accAmt)+" ")])}))],2),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"序号",type:"index"}}),a("el-table-column",{attrs:{prop:"shipperFullName",label:"托运人"}}),a("el-table-column",{attrs:{prop:"companyName",label:"业务管理公司",width:"120"}}),a("el-table-column",{attrs:{prop:"vehicleNumber",label:"车牌号"}}),a("el-table-column",{attrs:{prop:"carriageId",label:"运单编号"}}),a("el-table-column",{attrs:{prop:"reqSeqNo",label:"资金流水号",width:"120"}}),a("el-table-column",{attrs:{prop:"freightSum",label:"运费",width:"120"}}),a("el-table-column",{attrs:{prop:"chauffeurMoney",label:"司机收款金额",width:"120"}}),a("el-table-column",{attrs:{prop:"payeeName",label:"承运司机",width:"120"}}),a("el-table-column",{attrs:{label:"收款人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.payeeName)+"("+t._s(e.row.driverAccountBank)+" "+t._s(e.row.driverKaihuBank)+") ")]}}])}),a("el-table-column",{attrs:{prop:"anotherPayeeMoney",label:"第二收款人金额",width:"120"}}),a("el-table-column",{attrs:{label:"第二收款人",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.kaihuName)+"("+t._s(e.row.djAccountBank)+" "+t._s(e.row.djKaihuBank)+") ")]}}])}),a("el-table-column",{attrs:{prop:"auditStatus",label:"托运人审核状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.auditStatus?a("span",[t._v("内部审核中")]):1==e.row.auditStatus?a("span",[t._v("平台审核中")]):2==e.row.auditStatus?a("span",[t._v("打款中")]):3==e.row.auditStatus?a("span",[t._v("内部审核未通过")]):4==e.row.auditStatus?a("span",[t._v("平台审核未通过")]):5==e.row.auditStatus?a("span",[t._v("交易失败")]):6==e.row.auditStatus?a("span",[t._v("交易成功")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"internalAudit",label:"内部支付状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.internalAudit?a("span",[t._v("平台审核中")]):1==e.row.internalAudit?a("span",[t._v("平台审核不通过")]):2==e.row.internalAudit?a("span",[t._v("打款中")]):3==e.row.internalAudit?a("span",[t._v("打款成功")]):4==e.row.internalAudit?a("span",[t._v("打款失败")]):5==e.row.internalAudit?a("span",[t._v("财务退回")]):6==e.row.internalAudit?a("span",[t._v("已线下打款")]):7==e.row.internalAudit?a("span",[t._v("交易关闭")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"remake",label:"备注"}}),a("el-table-column",{attrs:{prop:"paymentTime",label:"打款时间"}}),a("el-table-column",{attrs:{prop:"depositBank",label:"支付渠道"}}),a("el-table-column",{attrs:{prop:"nickName",label:"申请人"}}),a("el-table-column",{attrs:{prop:"createTime",label:"申请时间",width:"120"}}),a("el-table-column",{attrs:{prop:"payApplyCode",label:"申请单编号"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"operate mr10",staticStyle:{color:"#409eff"},on:{click:function(a){return t.offlinePayment(e.row)}}},[t._v("线下打款")]),a("span",{staticClass:"operate mr10",staticStyle:{color:"#e6a23c"},on:{click:function(a){return t.againRemittance(e.row)}}},[t._v("再次发起付款")]),a("span",{staticClass:"operate mr10",staticStyle:{color:"#f56c6c"},on:{click:function(a){return t.fallbackPayment(e.row)}}},[t._v("回退")]),a("span",{staticClass:"operate mr10",staticStyle:{color:"#67c23a"},on:{click:function(a){return t.zhifupz(e.row)}}},[t._v("支付凭证")])]}}])})],1),a("div",{staticClass:"paging_css"},[a("Pagination",{attrs:{total:t.total,page:t.pageNum,limit:t.pageSize},on:{pagination:t.pagination}})],1),a("el-dialog",{attrs:{title:"支付凭证管理",visible:t.dialogVisible1,width:"50%",center:""},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-form",{ref:"form1",attrs:{model:t.form1,rules:t.rules1,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"申请付款单号",prop:"payApplyCode"}},[a("el-input",{attrs:{placeholder:"请输入申请付款单号",clearable:""},model:{value:t.form1.payApplyCode,callback:function(e){t.$set(t.form1,"payApplyCode",e)},expression:"form1.payApplyCode"}})],1),t.form1.paymentVoucher?a("el-form-item",{attrs:{label:"已上传的支付凭证"}},[a("div",{staticStyle:{"margin-bottom":"10px",display:"flex"}},t._l(t.form1.paymentVoucher,(function(e,i){return a("div",{key:i,staticClass:"baogtidv"},[a("div",{staticClass:"gbij",on:{click:function(e){return t.deleteImg(i)}}},[a("i",{staticClass:"el-icon-error"})]),a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e,fit:"cover"}})],1)})),0)]):t._e(),a("el-form-item",{attrs:{label:"上传支付凭证"}},[a("uploadIMGD",{ref:"uploadIMGD",attrs:{componentText:"添加凭证"},on:{pictureIMG:t.pictureIMG}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible1=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.setCredentials}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"批量上传支付凭证",visible:t.dialogVisible2,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("el-form",{ref:"form2",attrs:{model:t.form2,rules:t.rules2,"label-position":"top"}},[a("el-form-item",{attrs:{label:"请复制付款单号并粘贴至以下方框内，多个单号换行区分",prop:"payApplyCodeList "}},[a("el-input",{attrs:{type:"textarea",rows:8,clearable:""},model:{value:t.form2.payApplyCodeList,callback:function(e){t.$set(t.form2,"payApplyCodeList",e)},expression:"form2.payApplyCodeList"}})],1),a("el-form-item",{attrs:{label:"上传方式",prop:"uploadTheWay"}},[a("el-radio-group",{model:{value:t.form2.uploadTheWay,callback:function(e){t.$set(t.form2,"uploadTheWay",e)},expression:"form2.uploadTheWay"}},[a("el-radio",{attrs:{label:0}},[t._v("新增")]),a("el-radio",{attrs:{label:1}},[t._v("覆盖")])],1)],1),a("el-form-item",{attrs:{label:"上传支付凭证",prop:"paymentVoucherList"}},[a("uploadIMGD",{ref:"uploadIMGD2",attrs:{componentText:"添加凭证"},on:{pictureIMG:t.pictureIMG}})],1),a("el-form-item",{attrs:{label:""}},[a("span",[t._v("注:复制的运单号还未打款成功威新增后导致其凭证图片超过勒张的运竿则会失败")])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible2=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.batchPaymentCredentials}},[t._v("确 定")])],1)],1)],1)},l=[],n=(a("a9e3"),a("a434"),a("ac1f"),a("1276"),a("b775"));function o(t,e){return Object(n["a"])({url:"operation/FinancialRemittance/queryPaymentManage",method:"post",data:t,params:e})}function r(t){return Object(n["a"])({url:"operation/FinancialRemittance/uploadPaymentCredentials",method:"post",data:t})}function s(t){return Object(n["a"])({url:"operation/FinancialRemittance/offlinePayment",method:"post",data:t})}function c(t){return Object(n["a"])({url:"operation/FinancialRemittance/againRemittance",method:"post",data:t})}function u(t){return Object(n["a"])({url:"operation/FinancialRemittance/fallbackPayment",method:"post",data:t})}function p(t){return Object(n["a"])({url:"operation/FinancialRemittance/batchPaymentCredentials",method:"post",data:t})}function d(){return Object(n["a"])({url:"/operation/FinancialRemittance/queryAllCompanyAccountBalances",method:"get"})}var m=a("365c"),f=a("d48e"),b=a("333d"),h=a("bdce"),y={components:{Pagination:b["a"],uploadIMGD:h["a"]},data:function(){return{startTime:"",endTime:"",state:[{value:0,label:"内部审核中"},{value:1,label:"平台审核中"},{value:2,label:"打款中"},{value:3,label:"内部审核未通过"},{value:4,label:"平台审核未通过"},{value:5,label:"交易失败"},{value:6,label:"交易成功"},{value:7,label:"扣款成功"},{value:8,label:"扣款失败"},{value:9,label:"平台审核通过"}],audit_status:"",company:[{value:1,label:"A公司"},{value:2,label:"B公司"}],company_value:"",conditions:[{value:1,label:"车牌号"},{value:2,label:"运单编号"},{value:3,label:"司机手机号"},{value:4,label:"托运人名称"},{value:5,label:"申请单编号"},{value:6,label:"资金流水号"}],conditions_value:1,conditions_data:"vehicleNumber",numberData:"",tableData:[],rules1:{payApplyCode:[{required:!0,message:"请输入付款单号",trigger:"blur"}]},rules2:{payApplyCodeList:[{required:!0,message:"请输入申请付款单号",trigger:"blur"}]},dialogVisible1:!1,dialogVisible2:!1,form1:{payApplyCode:"",paymentVoucher:""},form2:{payApplyCodeList:"",uploadTheWay:0},pageSize:10,pageNum:1,total:0,paymentVoucher:"",bankData:[]}},watch:{conditions_value:function(t){switch(Number(t)){case 1:this.conditions_data="vehicleNumber";break;case 2:this.conditions_data="vehicleNumber";break;case 3:this.conditions_data="vehicleNumber";break;case 4:this.conditions_data="vehicleNumber";break;case 5:this.conditions_data="vehicleNumber";break;case 6:this.conditions_data="vehicleNumber";break}}},mounted:function(){this.getList(),this.queryAllCompanyAccountBalances()},methods:{queryAllCompanyAccountBalances:function(){var t=this;d().then((function(e){200==e.code&&(t.bankData=e.data)}))},piltk:function(){var t=this;this.paymentVoucher="",this.dialogVisible2=!0,setTimeout((function(){t.$refs.uploadIMGD2.originalData()}))},batchPaymentCredentials:function(){var t=this;this.$refs.form2.validate((function(e){e&&p({uploadTheWay:t.form2.uploadTheWay,payApplyCodeList:t.form2.payApplyCodeList,paymentVoucherList:t.paymentVoucher}).then((function(e){200==e.code&&(t.$message({message:"添加成功",type:"success",duration:3e3}),t.dialogVisible1=!1)}))}))},offlinePayment:function(t){var e=this;this.$confirm("是否对该条数据："+t.carriageCode+"打款","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s({payApplyCode:t.payApplyCode}).then((function(t){200==t.code&&(e.getList(),e.$message({message:"打款成功",type:"success",duration:3e3}))}))}))},againRemittance:function(t){var e=this;this.$confirm("是否对该条数据："+t.carriageCode+"再次发起付款","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c({payApplyCode:t.payApplyCode}).then((function(t){200==t.code&&(e.getList(),e.$message({message:"再次发起付款成功",type:"success",duration:3e3}))}))}))},fallbackPayment:function(t){var e=this;this.$confirm("是否对该条数据："+t.carriageCode+"回退","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u({payApplyCode:t.payApplyCode}).then((function(t){200==t.code&&(e.getList(),e.$message({message:"回退成功",type:"success",duration:3e3}))}))}))},deleteImg:function(t){var e=this;Object(m["d"])({filePath:this.form1.paymentVoucher[t]}).then((function(a){200==a.code&&(e.form1.paymentVoucher.splice(t,1),e.$message({message:"删除成功",type:"success",duration:2e3}))}))},zhifupz:function(t){var e,a=this;(this.paymentVoucher="",this.form1=t,Array.isArray(t.paymentVoucher))?this.form1.paymentVoucher=null===t||void 0===t?void 0:t.paymentVoucher:this.form1.paymentVoucher=null===t||void 0===t||null===(e=t.paymentVoucher)||void 0===e?void 0:e.split(",");this.dialogVisible1=!0,setTimeout((function(){a.$refs.uploadIMGD.originalData()}))},pictureIMG:function(t){t.length>1?this.paymentVoucher=String(t):1==t.length?this.paymentVoucher=String(t[0]):0==t.length&&(this.paymentVoucher="")},setCredentials:function(){var t=this;this.$refs.form1.validate((function(e){e&&r({payApplyCode:t.form1.payApplyCode,paymentVoucher:t.form1.paymentVoucher+","+t.paymentVoucher}).then((function(e){200==e.code&&(t.$message({message:"添加成功",type:"success",duration:3e3}),t.dialogVisible1=!1)}))}))},getList:function(){var t=this,e={audit_status:this.audit_status,startTime:this.startTime,endTime:this.endTime};e[this.conditions_data]=this.numberData,o(e,{pageSize:this.pageSize,pageNum:this.pageNum}).then((function(e){200==e.code&&(t.tableData=e.rows,t.total=e.total)}))},empty:function(){this.audit_status="",this.startTime="",this.endTime="",this.numberData="",this.pageSize=10,this.pageNum=1,this.getList()},query:function(){3==this.conditions_value?(""==this.numberData||Object(f["a"])(this.numberData))&&(this.pageNum=1,this.getList()):(this.pageNum=1,this.getList())},pagination:function(t){this.pageSize=t.limit,this.pageNum=t.page,this.getList()}}},v=y,g=(a("ec5c"),a("2877")),_=Object(g["a"])(v,i,l,!1,null,"689ba186",null);e["default"]=_.exports},bdce:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px",display:"flex"}},[t._l(t.IMG_data,(function(e,i){return a("div",{key:i,staticClass:"baogtidv"},[a("div",{staticClass:"gbij",on:{click:function(e){return t.deleteImg(i)}}},[a("i",{staticClass:"el-icon-error"})]),a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e,fit:"cover"},on:{click:function(a){return t.amplification(e)}}})],1)})),t.IMG_data.length<=0?a("div",{staticClass:"tiezlih"},[t._m(0)]):t._e()],2),a("el-upload",{attrs:{action:"","show-file-list":!1,"file-list":t.fileList,"http-request":t.uploadSectionFile}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.componentText))])],1),a("el-dialog",{attrs:{visible:t.dialogVisible,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tubd"},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])}],n=(a("a434"),a("365c")),o={data:function(){return{fileList:[],IMG_data:[],dialogImageUrl:"",dialogVisible:!1}},props:{componentText:{type:String,default:"添加图片"}},methods:{originalData:function(){this.fileList=[],this.IMG_data=[],this.dialogImageUrl="",this.dialogVisible=!1},uploadSectionFile:function(t){var e=this,a=t.file,i=a.size/1024/1024<6;if(i){var l=new FormData;l.append("file",a),Object(n["e"])(l).then((function(t){200==t.code&&(e.IMG_data.push(t.data),e.$emit("pictureIMG",e.IMG_data))}))}else this.$message.error("上传图片大小不能超过 6MB!")},deleteImg:function(t){var e=this;Object(n["d"])({filePath:this.IMG_data[t]}).then((function(a){200==a.code&&(e.IMG_data.splice(t,1),e.$emit("pictureIMG",e.IMG_data),e.$message({message:"删除成功",type:"success",duration:2e3}))}))},amplification:function(t){this.dialogImageUrl=t,this.dialogVisible=!0}}},r=o,s=(a("4cfd"),a("2877")),c=Object(s["a"])(r,i,l,!1,null,"96e15914",null);e["a"]=c.exports},d223:function(t,e,a){},d48e:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var i=a("5c96");function l(t){var e=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/;return!!e.test(t)||(Object(i["Message"])({message:"手机号不正确",type:"warning",duration:3e3}),!1)}},ec5c:function(t,e,a){"use strict";a("1720")}}]);