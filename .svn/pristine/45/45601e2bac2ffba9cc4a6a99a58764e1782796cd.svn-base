(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cc9a5"],{"4f41":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"mb20 flex transposition justify-end"},[a("el-date-picker",{staticClass:"mr5",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择更新起始日期"},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),a("el-date-picker",{staticClass:"mr5",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择更新结束日期"},model:{value:e.lastTradingTime,callback:function(t){e.lastTradingTime=t},expression:"lastTradingTime"}}),a("el-select",{attrs:{size:"small mr10",value:"",placeholder:"选择角色"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("el-option",{attrs:{value:1,label:"托运人"}}),a("el-option",{attrs:{value:2,label:"承运司机"}})],1),a("el-select",{attrs:{size:"small mr5",placeholder:"请选择条件"},model:{value:e.conditions_value,callback:function(t){e.conditions_value=t},expression:"conditions_value"}},[a("el-option",{attrs:{value:1,label:"用户名称"}}),a("el-option",{attrs:{value:2,label:"用户手机号"}})],1),a("el-input",{staticClass:"search mr5",attrs:{clearable:""},model:{value:e.numberData,callback:function(t){e.numberData=t},expression:"numberData"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),a("el-button",{attrs:{type:"danger"},on:{click:e.clearBtn}},[e._v("清空")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"userPhone",label:"用户手机号"}}),a("el-table-column",{attrs:{prop:"userName",label:"用户名称"}}),a("el-table-column",{attrs:{prop:"type",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.type?a("span",[e._v("托运人")]):3==t.row.type?a("span",[e._v("司机")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"totalMoney",label:"账户总额"}}),a("el-table-column",{attrs:{prop:"usableMoney",label:"可用余额"}}),a("el-table-column",{attrs:{prop:"freezeMoney",label:"冻结金额"}}),a("el-table-column",{attrs:{prop:"accountBank",label:"提现银行卡"}}),a("el-table-column",{attrs:{prop:"lastTradingTime",label:"最后更新时间"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"operate mr10",staticStyle:{color:"#e6a23c"},on:{click:function(a){return e.goInvoice(t.row)}}},[e._v("交易记录")]),2==t.row.type?a("span",{staticClass:"operate mr10",staticStyle:{color:"#409eff"},on:{click:function(a){return e.getRecharge(t.row)}}},[e._v("充值")]):e._e(),2==t.row.type?a("span",{staticClass:"operate mr10",staticStyle:{color:"#f56c6c"},on:{click:function(a){return e.getDeduction(t.row)}}},[e._v("扣款")]):e._e(),3==t.row.type?a("span",{staticClass:"operate mr10",staticStyle:{color:"#67c23a"},on:{click:function(a){return e.getBankCark(t.row)}}},[e._v("银行卡管理")]):e._e()]}}])})],1),a("div",{staticClass:"paging_css"},[a("Pagination",{attrs:{total:e.total,page:e.pageNum,limit:e.pageSize},on:{pagination:e.pagination}})],1),a("el-dialog",{attrs:{title:"银行卡管理",visible:e.dialogVisible,width:"500px",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"queryCard",attrs:{model:e.queryCard,rules:e.rules3,"label-width":"150px"}},[a("p",[e._v("银行卡信息(绑定成功后，指派给该承运人的运单，均使用此银行卡结算)")]),a("el-form-item",{attrs:{label:"银行卡号",prop:"bankCardNumber"}},[a("el-input",{attrs:{clearable:""},model:{value:e.queryCard.bankCardNumber,callback:function(t){e.$set(e.queryCard,"bankCardNumber",t)},expression:"queryCard.bankCardNumber"}})],1),a("el-form-item",{attrs:{label:"持卡人姓名",prop:"cardholderName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.queryCard.cardholderName,callback:function(t){e.$set(e.queryCard,"cardholderName",t)},expression:"queryCard.cardholderName"}})],1),a("el-form-item",{attrs:{label:"持卡人身份证号",prop:"cardholderIDNumber"}},[a("el-input",{attrs:{clearable:""},model:{value:e.queryCard.cardholderIDNumber,callback:function(t){e.$set(e.queryCard,"cardholderIDNumber",t)},expression:"queryCard.cardholderIDNumber"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.cardBtn}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"账户扣款",visible:e.dialogVisible1,width:"600px",center:""},on:{"update:visible":function(t){e.dialogVisible1=t}}},[a("el-form",{ref:"queryToDown",attrs:{model:e.queryToDown,rules:e.rules2,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"扣款用户",prop:"userId"}},[[a("span",[e._v(e._s(e.queryToDown.userId))])]],2),a("el-form-item",{attrs:{label:"可用余额",prop:"usableMoney"}},[[a("span",[e._v(e._s(e.queryToDown.usableMoney))])]],2),a("el-form-item",{attrs:{label:"扣款金额",prop:"amountOfDeductions"}},[a("el-input",{attrs:{clearable:""},model:{value:e.queryToDown.amountOfDeductions,callback:function(t){e.$set(e.queryToDown,"amountOfDeductions",t)},expression:"queryToDown.amountOfDeductions"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:8,clearable:""},model:{value:e.queryToDown.remark,callback:function(t){e.$set(e.queryToDown,"remark",t)},expression:"queryToDown.remark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible1=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.toDown}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"账户充值",visible:e.dialogVisible2,width:"600px",center:""},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("el-form",{ref:"queryRecharge",attrs:{model:e.queryRecharge,rules:e.rules1,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"充值用户",prop:"userId"}},[[a("span",[e._v(e._s(e.queryRecharge.userId))])]],2),a("el-form-item",{attrs:{label:"可用余额",prop:"usableMoney"}},[[a("span",[e._v(e._s(e.queryRecharge.usableMoney))])]],2),a("el-form-item",{attrs:{label:"充值金额",prop:"topUpAmount"}},[a("el-input",{attrs:{clearable:""},model:{value:e.queryRecharge.topUpAmount,callback:function(t){e.$set(e.queryRecharge,"topUpAmount",t)},expression:"queryRecharge.topUpAmount"}})],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea",rows:8,clearable:""},model:{value:e.queryRecharge.remark,callback:function(t){e.$set(e.queryRecharge,"remark",t)},expression:"queryRecharge.remark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.toUp}},[e._v("确 定")])],1)],1)],1)},o=[],l=(a("a9e3"),a("b775"));function s(e,t){return Object(l["a"])({url:"operation/usersPurse/queryUsersPurseInfo",method:"post",data:e,params:t})}function i(e){return Object(l["a"])({url:"operation/usersPurse/clientAccountTopUp",method:"post",data:e})}function n(e){return Object(l["a"])({url:"operation/usersPurse/clientDeductions",method:"post",data:e})}function u(e){return Object(l["a"])({url:"operation/usersPurse/updateDriverBankCard",method:"post",data:e})}function c(e){return Object(l["a"])({url:"operation/usersPurse/queryBankCardInfo",method:"post",data:e})}var d=a("333d"),p={components:{Pagination:d["a"]},data:function(){return{tableData:[],rules1:{topUpAmount:[{required:!0,message:"充值金额不能为空"}],remark:[{required:!0,message:"备注不能为空"}]},rules2:{amountOfDeductions:[{required:!0,message:"扣款金额不能为空"}],remark:[{required:!0,message:"备注不能为空"}]},rules3:{bankCardNumber:[{required:!0,message:"银行卡号不能为空"}],cardholderName:[{required:!0,message:"持卡人姓名不能为空"}],cardholderIDNumber:[{required:!0,message:"持卡人身份证号不能为空"}]},dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,startTime:"",lastTradingTime:"",type:"",conditions_value:1,conditions_data:"userPhone",numberData:"",queryRecharge:{remark:"",topUpAmount:"",userId:"",usableMoney:""},queryToDown:{amountOfDeductions:"",remark:"",userId:""},queryCard:{bankCardNumber:"",cardholderIDNumber:"",cardholderName:"",chauffeurId:""},pageSize:10,pageNum:1,total:0}},watch:{conditions_value:function(e){switch(Number(e)){case 1:this.conditions_data="userPhone";break;case 2:this.conditions_data="userName";break}}},mounted:function(){this.getList()},methods:{goInvoice:function(e){this.$router.push({path:"/finance/record/index",query:{userId:e.userId,type:e.type}})},getRecharge:function(e){this.dialogVisible2=!0,this.queryRecharge.userId=e.userId,this.queryRecharge.usableMoney=e.usableMoney},toUp:function(){var e=this;this.$refs.queryRecharge.validate((function(t){t&&i(e.queryRecharge).then((function(t){200==t.code&&(e.$message({message:"操作成功",type:"success",duration:3e3}),e.$refs.queryRecharge.resetFields(),e.dialogVisible2=!1,e.getList())}))}))},getDeduction:function(e){this.dialogVisible1=!0,this.queryToDown.userId=e.userId,this.queryToDown.usableMoney=e.usableMoney},toDown:function(){var e=this;this.$refs.queryToDown.validate((function(t){t&&n(e.queryToDown).then((function(t){200==t.code&&(e.$message({message:"操作成功",type:"success",duration:3e3}),e.$refs.queryToDown.resetFields(),e.dialogVisible1=!1,e.getList())}))}))},getBankCark:function(e){var t=this;this.queryCard.chauffeurId=e.userId,c({chauffeurId:e.userId}).then((function(e){var a,r,o;200==e.code&&(t.queryCard.cardholderName=null===(a=e.data)||void 0===a?void 0:a.cardholderName,t.queryCard.bankCardNumber=null===(r=e.data)||void 0===r?void 0:r.bankCardNumber,t.queryCard.cardholderIDNumber=null===(o=e.data)||void 0===o?void 0:o.cardholderIDNumber,t.dialogVisible=!0)}))},cardBtn:function(){var e=this;this.$refs.queryCard.validate((function(t){t&&u(e.queryCard).then((function(t){200==t.code&&(e.$message({message:"操作成功",type:"success",duration:3e3}),e.$refs.queryCard.resetFields(),e.dialogVisible=!1,e.getList())}))}))},query:function(){this.pageNum=1,this.getList()},getList:function(){var e=this,t={startTime:this.startTime,lastTradingTime:this.lastTradingTime,type:this.type};t[this.conditions_data]=this.numberData,s(t,{pageSize:this.pageSize,pageNum:this.pageNum}).then((function(t){200==t.code&&(e.tableData=t.rows,e.total=t.total)}))},pagination:function(e){this.pageSize=e.limit,this.pageNum=e.page,this.getList()},clearBtn:function(){this.startTime="",this.lastTradingTime="",this.type="",this.numberData="",this.pageSize=10,this.getList()}}},m=p,b=a("2877"),y=Object(b["a"])(m,r,o,!1,null,"54ef6995",null);t["default"]=y.exports}}]);