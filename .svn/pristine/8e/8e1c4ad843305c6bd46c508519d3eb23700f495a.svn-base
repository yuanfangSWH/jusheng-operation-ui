(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21b2f9"],{bf65:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"mb20"},[o("el-button",{attrs:{type:"primary"},on:{click:t.goInfo}},[t._v("创建")])],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[o("el-table-column",{attrs:{type:"index",label:"序号"}}),o("el-table-column",{attrs:{prop:"noticeTitle",label:"公告标题"}}),o("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),o("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),o("el-table-column",{attrs:{prop:"noticeScope",label:"公告范围"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.noticeScope?o("span",[t._v("托运人端")]):2==e.row.noticeScope?o("span",[t._v("承运人端")]):3==e.row.noticeScope?o("span",[t._v("全平台")]):t._e()]}}])}),o("el-table-column",{attrs:{prop:"status",label:"公告状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?o("span",[t._v("下线")]):1==e.row.status?o("span",[t._v("上线")]):t._e()]}}])}),o("el-table-column",{attrs:{label:"操作",fixed:"right",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.cancel(e.row.noticeId)}}},[t._v("取消发布")]):0===e.row.status?o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.issue(e.row.noticeId)}}},[t._v("发布")]):t._e(),o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){return t.edit(e.row.noticeId)}}},[t._v("编辑")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.deleteBtn(e.row.noticeId)}}},[t._v("删除")])]}}])})],1),o("div",{staticClass:"paging_css"},[o("Pagination",{attrs:{total:t.total,page:t.pageNum,limit:t.pageSize},on:{pagination:t.pagination}})],1),o("el-dialog",{attrs:{title:"发布公告",visible:t.dialogVisible,width:"50%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"top"}},[o("el-form-item",{attrs:{label:"公告标题",prop:"companyName"}},[o("el-input",{attrs:{clearable:""},model:{value:t.form.noticeTitle,callback:function(e){t.$set(t.form,"noticeTitle",e)},expression:"form.noticeTitle"}})],1),o("el-form-item",{attrs:{label:"公告内容",prop:"companyName"}},[o("el-input",{attrs:{type:"textarea",rows:9,clearable:""},model:{value:t.form.noticeContent,callback:function(e){t.$set(t.form,"noticeContent",e)},expression:"form.noticeContent"}})],1),o("el-form-item",{attrs:{label:"设置公告类型(至少勾选—个终端，勾选的终端可正常查看公告信息)",prop:"companyName"}},[o("el-radio-group",{model:{value:t.form.noticeScope,callback:function(e){t.$set(t.form,"noticeScope",e)},expression:"form.noticeScope"}},[o("el-radio",{attrs:{label:0}},[t._v("通知")]),o("el-radio",{attrs:{label:1}},[t._v("公告")]),o("el-radio",{attrs:{label:2}},[t._v("托运人端")]),o("el-radio",{attrs:{label:3}},[t._v("承运人端")]),o("el-radio",{attrs:{label:4}},[t._v("全平台")])],1)],1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("确 定")])],1)],1)],1)},a=[],i=o("b775");function s(t,e){return Object(i["a"])({url:"/operation/sysNoticeManage/queryNoticeManages",method:"post",data:t,params:e})}function r(t){return Object(i["a"])({url:"/operation/sysNoticeManage/savaJushengSysNotice",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/operation/sysNoticeManage/release",method:"post",data:{noticeId:t}})}function c(t){return Object(i["a"])({url:"/operation/sysNoticeManage/revocation",method:"post",data:{noticeId:t}})}function u(t){return Object(i["a"])({url:"/operation/sysNoticeManage/deleteJushengSysNotice",method:"post",params:{noticeId:t}})}function p(t){return Object(i["a"])({url:"/operation/sysNoticeManage/queryNoticeManageById",method:"post",params:{noticeId:t}})}function d(t){return Object(i["a"])({url:"/operation/sysNoticeManage/updateJushengSysNotice",method:"post",data:t})}var m=o("333d"),f={components:{Pagination:m["a"]},data:function(){return{tableData:[],dialogVisible:!1,rules:"",form:{noticeContent:"",noticeScope:"",noticeTitle:"",sysNotice:"",noticeId:null},noticeId:"",pageSize:10,pageNum:1,total:0}},created:function(){this.getList()},methods:{goInfo:function(){this.dialogVisible=!0},getList:function(){var t=this;s({},{pageSize:this.pageSize,pageNum:this.pageNum}).then((function(e){200==e.code&&(t.tableData=e.rows,t.total=e.total,t.noticeId=e.rows.noticeId)}))},pagination:function(t){this.pageSize=t.limit,this.pageNum=t.page,this.getList()},add:function(){var t=this,e=this.form.noticeId;null==e&&""==e?r(this.form).then((function(e){t.getList(),t.dialogVisible=!1,t.form=""})):d(this.form).then((function(e){t.getList(),t.dialogVisible=!1,t.form=""}))},issue:function(t){var e=this;l(t).then((function(t){0==t.code&&e.$message.error(t.msg),e.$message.success(t.msg),e.getList()}))},cancel:function(t){var e=this;c(t).then((function(t){200!==t.code&&e.$message.error(t.msg),e.$message.success(t.msg),e.getList()}))},deleteBtn:function(t){var e=this;this.$confirm("您确定要删除该公告吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){u(t).then((function(t){e.msgSuccess("删除成功"),e.getList()}))})).catch((function(){e.msgError("删除失败")}))},edit:function(t){var e=this;p(t).then((function(t){e.dialogVisible=!0,null!=t&&void 0!=t.code&&200===t.code&&null!=t.data&&(e.form=t.data)}))}}},g=f,b=o("2877"),h=Object(b["a"])(g,n,a,!1,null,"463310bf",null);e["default"]=h.exports}}]);